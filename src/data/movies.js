export const movies = [
  {
    id: 1,
    title: "Ponniyin Selvan: Part 1",
    year: "2022",
    rating: 7.6,
    genre: "Action, Adventure, Drama",
    runtime: "2h 47m",
    director: "Mani Ratnam",
    cast: ["Vikram", "Aishwarya Rai", "Karthi", "Trisha"],
    synopsis: "The Chola dynasty faces internal threats and outer enemies as the crown prince is away.",
    poster: "https://image.tmdb.org/t/p/w500/pHXjT9e1zC2vJKAoR3zWb4zV8Gj.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/mX66kL9uXFvX6n8zWbK8k0Z7z9z.jpg",
    trailer: "https://www.youtube.com/watch?v=gT8hBIn7g-U"
  },
  {
    id: 2,
    title: "Vikram",
    year: "2022",
    rating: 8.3,
    genre: "Action, Crime, Thriller",
    runtime: "2h 55m",
    director: "Lokesh Kanagaraj",
    cast: ["Kamal Haasan", "Vijay Sethupathi", "Fahadh Faasil", "Suriya"],
    synopsis: "A high-octane action film involving a special agent investigator and a drug cartel.",
    poster: "https://image.tmdb.org/t/p/w500/pKK1cZ78tK4gP4KzVv1xY42R3F0.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/9r9X6fV9X8H7X6f9r9X8H7X6f9r.jpg",
    trailer: "https://www.youtube.com/watch?v=OKBMCL-fS5w"
  },
  {
    id: 3,
    title: "Jai Bhim",
    year: "2021",
    rating: 8.8,
    genre: "Crime, Drama",
    runtime: "2h 44m",
    director: "T.J. Gnanavel",
    cast: ["Suriya", "Lijomol Jose", "Manikandan"],
    synopsis: "A biting social commentary on caste discrimination and legal battle for justice.",
    poster: "https://image.tmdb.org/t/p/w500/nnXpbTFrqXA.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/8Yj6pXm6gE6u8G6G.jpg",
    trailer: "https://www.youtube.com/watch?v=nnXpbTFrqXA"
  },
  {
    id: 4,
    title: "Leo",
    year: "2023",
    rating: 7.2,
    genre: "Action, Crime, Drama",
    runtime: "2h 44m",
    director: "Lokesh Kanagaraj",
    cast: ["Vijay", "Sanjay Dutt", "Trisha Krishnan"],
    synopsis: "A mild-mannered cafe owner becomes a local hero, but his past catches up with him.",
    poster: "https://image.tmdb.org/t/p/w500/mOx2pXm6gE6u8G6G.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/6y788s2vY59vWfW6F6Y9r599.jpg",
    trailer: "https://www.youtube.com/watch?v=Po3jVhGj99Q"
  },
  {
    id: 5,
    title: "Jailer",
    year: "2023",
    rating: 7.1,
    genre: "Action, Crime",
    runtime: "2h 48m",
    director: "Nelson Dilipkumar",
    cast: ["Rajinikanth", "Vinayakan", "Ramya Krishnan"],
    synopsis: "A retired jailer goes on a hunt for his son's killers and uncovers a massive idol smuggling ring.",
    poster: "https://image.tmdb.org/t/p/w500/80u3X4mU3vS0i1YvE8N5G7I9D0L.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/9r9X6fV9X8H7X6f9r9X8H7X6f9r.jpg",
    trailer: "https://www.youtube.com/watch?v=xenOE1Sqb_g"
  },
  {
    id: 6,
    title: "Asuran",
    year: "2019",
    rating: 8.5,
    genre: "Action, Drama",
    runtime: "2h 21m",
    director: "Vetrimaaran",
    cast: ["Dhanush", "Manju Warrier", "Prakash Raj"],
    synopsis: "A father tries to save his hot-blooded son from the consequences of a murder.",
    poster: "https://image.tmdb.org/t/p/w500/7pE0IA4P5X5p6n6yXm6gE6u8G6G.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/6pSBAXm6gE6u8G6G.jpg",
    trailer: "https://www.youtube.com/watch?v=J6iP_1P1r8"
  },
  {
    id: 7,
    title: "Master",
    year: "2021",
    rating: 7.8,
    genre: "Action, Thriller",
    runtime: "2h 59m",
    director: "Lokesh Kanagaraj",
    cast: ["Vijay", "Vijay Sethupathi", "Malavika Mohanan"],
    synopsis: "An alcoholic professor is sent to a juvenile home, where he clashes with a ruthless gangster.",
    poster: "https://image.tmdb.org/t/p/w500/pYfO16I7JkToB9C2G8Osw6MIGG2.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/uX5TM5Y2MtN2U3OC00YWE0LThiMTgt.jpg",
    trailer: "https://www.youtube.com/watch?v=sQTLcT8y60I"
  },
  {
    id: 8,
    title: "Sarpatta Parambarai",
    year: "2021",
    rating: 8.6,
    genre: "Action, Drama, Sport",
    runtime: "2h 53m",
    director: "Pa. Ranjith",
    cast: ["Arya", "Pasupathy", "John Kokken"],
    synopsis: "A young man living in North Madras finds himself in a rivalry between two boxing clans.",
    poster: "https://image.tmdb.org/t/p/w500/fN0IXm6gE6u8G6G.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/a6S8Xm6gE6u8G6G.jpg",
    trailer: "https://www.youtube.com/watch?v=Bf0S_D85TIs"
  },
  {
    id: 9,
    title: "Maanadu",
    year: "2021",
    rating: 8.3,
    genre: "Action, Sci-Fi, Thriller",
    runtime: "2h 27m",
    director: "Venkat Prabhu",
    cast: ["Silambarasan", "S.J. Suryah", "Kalyani Priyadarshan"],
    synopsis: "A man gets stuck in a time loop on the day of a political rally.",
    poster: "https://image.tmdb.org/t/p/w500/a6S8Xm6gE6u8G6G.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/fN0IXm6gE6u8G6G.jpg",
    trailer: "https://www.youtube.com/watch?v=3R-zVq7gV4c"
  },
  {
    id: 10,
    title: "Soorarai Pottru",
    year: "2020",
    rating: 8.7,
    genre: "Action, Drama",
    runtime: "2h 33m",
    director: "Sudha Kongara",
    cast: ["Suriya", "Paresh Rawal", "Aparna Balamurali"],
    synopsis: "A young man from a remote village dreams of launching his own low-cost airline service.",
    poster: "https://image.tmdb.org/t/p/w500/uL3yXm6gE6u8G6G.jpg",
    backdrop: "https://image.tmdb.org/t/p/original/mOx2pXm6gE6u8G6G.jpg",
    trailer: "https://www.youtube.com/watch?v=fa_DIwRsa9o"
  }
];

export const getAllMovies = () => {
  try {
    const stored = localStorage.getItem('movies');
    if (stored) {
      const parsed = JSON.parse(stored);
      if (Array.isArray(parsed) && parsed.length > 0) {
        // Check if there are new movies in the hardcoded file that aren't in localStorage
        const newInFile = movies.filter(fm => !parsed.find(sm => sm.id === fm.id));

        if (newInFile.length > 0) {
          // Sync: Append new movies from file to the stored list
          const updatedMovies = [...parsed, ...newInFile];
          // Sort by ID to keep it somewhat organized
          updatedMovies.sort((a, b) => a.id - b.id);
          localStorage.setItem('movies', JSON.stringify(updatedMovies));
          return updatedMovies;
        }
        return parsed;
      }
    }
  } catch (e) {
    console.error("Failed to parse movies from localStorage", e);
  }
  return getInitialMovies();
};

export const getInitialMovies = () => {
  localStorage.setItem('movies', JSON.stringify(movies));
  return movies;
};
